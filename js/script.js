document.addEventListener("DOMContentLoaded",function(){document.getElementById("current-year").textContent=new Date().getFullYear();let e=document.getElementById("particle-container"),t=[],s={count:30,minSize:10,maxSize:50,speed:1,interactionRadius:500,shapes:["circle","square","triangle","star"],colors:["#6C5CE7","#00D2D3","#FF7675","#2ecc71","#3498db","#9b59b6","#e74c3c","#f1c40f","#1abc9c"],minOpacity:.05,maxOpacity:.2},l=0,r=0,i=!1,o;function n(){let l=document.createElement("div");l.className="particle";let r=s.shapes[Math.floor(Math.random()*s.shapes.length)];l.classList.add(r);let i=Math.random()*(s.maxSize-s.minSize)+s.minSize,o=Math.random()*window.innerWidth,n=Math.random()*window.innerHeight,a=Math.random()*(s.maxOpacity-s.minOpacity)+s.minOpacity,c=s.colors[Math.floor(Math.random()*s.colors.length)];l.style.width=`${i}px`,l.style.height=`${i}px`,l.style.left=`${o}px`,l.style.top=`${n}px`,l.style.opacity=a.toString(),"triangle"===r?(l.style.borderLeftWidth=`${i/2}px`,l.style.borderRightWidth=`${i/2}px`,l.style.borderBottomWidth=`${.866*i}px`,l.style.borderBottomColor=c):l.style.backgroundColor=c,e.appendChild(l);let d={element:l,x:o,y:n,size:i,speedX:(2*Math.random()-1)*s.speed,speedY:(2*Math.random()-1)*s.speed,opacity:a,color:c,shape:r,baseX:o,baseY:n,density:30*Math.random()+10,angle:360*Math.random()};return t.push(d),d}function a(){t.forEach(e=>{if(e.x+=e.speedX,e.y+=e.speedY,(e.x>window.innerWidth||e.x<0)&&(e.speedX*=-1),(e.y>window.innerHeight||e.y<0)&&(e.speedY*=-1),i){let t=l-e.x,o=r-e.y,n=Math.sqrt(t*t+o*o);if(n<s.interactionRadius){let a=(s.interactionRadius-n)/s.interactionRadius,c=t/n*a*e.density*.2,d=o/n*a*e.density*.2;e.x-=c,e.y-=d}}else e.x+=(e.baseX-e.x)*.01,e.y+=(e.baseY-e.y)*.01;if("circle"!==e.shape){e.angle+=.2*(e.size/s.maxSize);let h=`rotate(${e.angle}deg)`;e.element.style.transform=h}e.element.style.left=`${e.x}px`,e.element.style.top=`${e.y}px`}),requestAnimationFrame(a)}document.addEventListener("mousemove",e=>{l=e.clientX,r=e.clientY,i=!0,clearTimeout(o),o=setTimeout(()=>{i=!1},2e3)}),document.addEventListener("touchmove",e=>{e.touches[0]&&(l=e.touches[0].clientX,r=e.touches[0].clientY,i=!0,clearTimeout(o),o=setTimeout(()=>{i=!1},2e3))}),window.addEventListener("resize",()=>{t.forEach(e=>{e.x>window.innerWidth&&(e.x=window.innerWidth*Math.random(),e.baseX=e.x),e.y>window.innerHeight&&(e.y=window.innerHeight*Math.random(),e.baseY=e.y)})}),function l(){for(;e.firstChild;)e.removeChild(e.firstChild);t.length=0;for(let r=0;r<s.count;r++)n()}(),requestAnimationFrame(a),window.addEventListener("load",function(){setTimeout(function(){document.querySelector(".preloader").classList.add("loaded")},500)});let c=document.querySelector(".custom-cursor"),d=document.querySelector(".custom-cursor-text");if("ontouchstart"in window||navigator.maxTouchPoints>0)c.style.display="none";else{let h=0,u=0,y=0,m=0;document.addEventListener("mousemove",function(e){h=e.clientX,u=e.clientY}),!function e(){y+=(h-y)*.2,m+=(u-m)*.2,c.style.left=y+"px",c.style.top=m+"px",requestAnimationFrame(e)}()}let g=document.createElement("style");g.textContent=`
@keyframes rotate {
from { transform: translate(-50%, -50%) rotate(0deg); }
to { transform: translate(-50%, -50%) rotate(360deg); }
}

.rotate-effect {
animation: rotate 2s linear infinite;
}

.glow-effect {
box-shadow: 0 0 15px var(--color-primary);
}
`,document.head.appendChild(g);let f=document.querySelectorAll(".btn");f.forEach(e=>{e.addEventListener("mouseenter",()=>{c.classList.add("with-text","glow-effect"),d.textContent="",c.style.width="50px",c.style.height="50px",c.style.borderRadius="50%",c.style.border="2px solid var(--color-primary)",c.style.backgroundColor="rgba(108, 92, 231, 0.1)"}),e.addEventListener("mouseleave",()=>{c.classList.remove("with-text","glow-effect"),d.textContent="",c.style.width="",c.style.height="",c.style.borderRadius="",c.style.border="",c.style.backgroundColor=""})});let $=document.querySelectorAll("img, .project-thumbnail, .about-image, .img-container");$.forEach(e=>{e.addEventListener("mouseenter",()=>{c.classList.add("hover-image"),c.style.width="80px",c.style.height="80px",c.style.borderRadius="8px",c.style.border="2px solid var(--color-secondary)",c.style.backgroundColor="transparent"}),e.addEventListener("mouseleave",()=>{c.classList.remove("hover-image"),c.style.width="",c.style.height="",c.style.borderRadius="",c.style.border="",c.style.backgroundColor=""})});let v=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, .section-title, .section-subtitle, .hero-title, .hero-subtitle");v.forEach(e=>{e.addEventListener("mouseenter",()=>{c.classList.add("rotate-effect"),c.style.backgroundColor="rgba(0, 210, 211, 0.8)",c.style.width="40px",c.style.height="40px",c.style.borderRadius="5px"}),e.addEventListener("mouseleave",()=>{c.classList.remove("rotate-effect"),c.style.backgroundColor="",c.style.width="",c.style.height="",c.style.borderRadius=""})});let p=document.querySelectorAll("a:not(.btn), .nav-link, .social-link, .footer-link, .project-card, .filter-btn");p.forEach(e=>{e.addEventListener("mouseenter",()=>{c.classList.add("hover-link"),c.style.width="15px",c.style.height="15px",c.style.borderRadius="50%",c.style.backgroundColor="var(--color-secondary)",c.style.opacity="0.5"}),e.addEventListener("mouseleave",()=>{c.classList.remove("hover-link"),c.style.width="",c.style.height="",c.style.borderRadius="",c.style.backgroundColor="",c.style.opacity=""})});let b=document.querySelectorAll("input, textarea, select, .form-control");b.forEach(e=>{e.addEventListener("mouseenter",()=>{c.classList.add("form-hover"),c.style.width="15px",c.style.height="15px",c.style.borderRadius="50%",c.style.backgroundColor="var(--color-secondary)",c.style.opacity="0.5"}),e.addEventListener("focus",()=>{c.classList.add("form-focus"),c.style.width="5px",c.style.height="25px",c.style.borderRadius="2px",c.style.backgroundColor="var(--color-accent)",c.style.opacity="0.7"}),e.addEventListener("mouseleave",()=>{e.matches(":focus")||(c.classList.remove("form-hover"),c.style.width="",c.style.height="",c.style.borderRadius="",c.style.backgroundColor="",c.style.opacity="")}),e.addEventListener("blur",()=>{c.classList.remove("form-focus"),c.style.width="",c.style.height="",c.style.borderRadius="",c.style.backgroundColor="",c.style.opacity=""})});let L=document.querySelectorAll("h1, h2, h3, h4, h5, h6, p, a, button, .img, .project-tags, .certification-icon, .project-thumbnail, .hero-greeting, .stat-item, .hero-scroll, .timeline-date, li, .project-card, .skill-item"),x=new Map;L.forEach(e=>{x.set(e,{x:0,y:0,active:!1}),e.addEventListener("mouseenter",function(){this.style.transition="none",x.get(this).active=!0}),e.addEventListener("mousemove",function(e){let t=this.getBoundingClientRect(),s=e.clientX-t.left,l=e.clientY-t.top,r=t.width/2,i=t.height/2,o=x.get(this);o.x=(s-r)/3,o.y=(l-i)/3}),e.addEventListener("mouseleave",function(){this.style.transition="transform 3s cubic-bezier(0.25, 0.46, 0.45, 0.94)",this.style.transform="translate(0, 0)";let e=x.get(this);e.active=!1,e.x=0,e.y=0})}),!function e(){x.forEach((e,t)=>{if(e.active){let s=window.getComputedStyle(t).transform,l=0,r=0;if(s&&"none"!==s){let i=new DOMMatrix(s);l=i.m41,r=i.m42}let o=l+(e.x-l)*.1,n=r+(e.y-r)*.1;t.style.transform=`translate(${o}px, ${n}px)`}}),requestAnimationFrame(e)}();let E=document.getElementById("theme-toggle");E&&(E.addEventListener("mouseenter",()=>{c.classList.add("hover-link"),c.style.width="15px",c.style.height="15px",c.style.borderRadius="50%",c.style.backgroundColor="var(--color-secondary)",c.style.opacity="0.5"}),E.addEventListener("mouseleave",()=>{c.classList.remove("hover-link"),c.style.width="",c.style.height="",c.style.borderRadius="",c.style.backgroundColor="",c.style.opacity=""}));let _=document.getElementById("search-toggle");_&&(_.addEventListener("mouseenter",()=>{c.classList.add("hover-link"),c.style.width="15px",c.style.height="15px",c.style.borderRadius="50%",c.style.backgroundColor="var(--color-secondary)",c.style.opacity="0.5"}),_.addEventListener("mouseleave",()=>{c.classList.remove("hover-link"),c.style.width="",c.style.height="",c.style.borderRadius="",c.style.backgroundColor="",c.style.opacity=""}));let k=document.getElementById("navbar");window.addEventListener("scroll",function(){window.scrollY>50?k.classList.add("scrolled"):k.classList.remove("scrolled")});let C=document.getElementById("hamburger"),w=document.getElementById("mobile-menu");C.addEventListener("click",function(){this.classList.toggle("active"),w.classList.toggle("active"),document.body.classList.toggle("menu-open")});let S=document.querySelectorAll(".mobile-nav-link a");S.forEach(e=>{e.addEventListener("click",function(){C.classList.remove("active"),w.classList.remove("active"),document.body.classList.remove("menu-open")})});let q=document.getElementById("search-toggle"),Y=document.getElementById("search-panel"),A=document.getElementById("search-close"),R=document.getElementById("search-input"),B=document.getElementById("search-results");q.addEventListener("click",function(){Y.classList.add("active"),setTimeout(()=>{R.focus()},300)}),A.addEventListener("click",function(){Y.classList.remove("active")}),document.addEventListener("keydown",function(e){"Escape"===e.key&&Y.classList.contains("active")&&Y.classList.remove("active")});let I=document.getElementById("search-form");var X,H=300;let j;function O(){let e=R.value.trim().toLowerCase();if(e.length<2){B.innerHTML='<div class="search-info">Start typing to search through the entire site content...</div>';return}let t=function e(){let t=[];return document.querySelectorAll("h1, h2, h3, h4, h5, h6, p, a, span, button, .skill-item, .project-title, .project-description, .project-tag, .testimonial-quote, .form-label, .btn, .section-title, .section-subtitle, .hero-title, .hero-subtitle, .footer-text, .copyright, .cube-list-label, .cube-list-value, .cube-face-title, .cube-objective, .cube-language-name, .cube-language-level, .cube-hobby-name").forEach(e=>{if(Y.contains(e))return;let s=e.textContent.trim();if(s.length>1){let l=e.tagName,r="General",i=e.closest("section");i&&i.id&&(r=i.id.charAt(0).toUpperCase()+i.id.slice(1));let o=e.closest(".cube-face");if(o){let n=o.querySelector(".cube-face-title");n&&(l="Personal Info",r=n.textContent.trim())}e.classList.contains("project-title")?l="Project":e.classList.contains("skill-item")?l="Skill":e.classList.contains("testimonial-quote")?l="Testimonial":e.classList.contains("btn")?l="Button":e.classList.contains("section-title")?l="Section":e.classList.contains("cube-list-label")&&(l="Personal Detail");let a="#";i&&i.id?a="#"+i.id:e.closest("[id]")&&(a="#"+e.closest("[id]").id),o&&(a="#personal");let c=s,d=e.closest("p");if(d&&(c=d.textContent.trim()),e.classList.contains("cube-list-label")){let h=e.closest(".cube-list-item")?.querySelector(".cube-list-value");h&&(c=`${s}: ${h.textContent.trim()}`)}t.push({text:s,element:e,category:l,section:r,url:a,context:c})}}),t}(),s=function e(t,s){let l=[];return t.forEach(e=>{if(e.text.toLowerCase().includes(s)||e.context.toLowerCase().includes(s)){let t=0;e.text.toLowerCase()===s?t+=10:e.text.toLowerCase().startsWith(s)?t+=8:e.text.toLowerCase().includes(s)?t+=5:e.context.toLowerCase().includes(s)&&(t+=3),e.element.tagName.startsWith("H")&&(t+=3),("Project"===e.category||"Section"===e.category)&&(t+=2),l.push({...e,score:t})}}),l.sort((e,t)=>t.score-e.score)}(t,e);!function e(t,s){if(B.innerHTML="",0===t.length){B.innerHTML='<div class="search-empty">No results found for "'+s+'"</div>';return}let l={};for(let r in t.forEach(e=>{l[e.section]||(l[e.section]=[]),l[e.section].push(e)}),l){let i=l[r].slice(0,3);i.forEach(e=>{let t=document.createElement("div");t.className="search-result";let l=e.text,r=RegExp(`(${s})`,"gi");l=l.replace(r,'<span class="search-highlight">$1</span>');let i=e.context;if(i.length>100){let o=i.toLowerCase().indexOf(s.toLowerCase());if(-1!==o){let n=Math.max(0,o-40),a=Math.min(i.length,o+s.length+40);i=(n>0?"...":"")+i.substring(n,a)+(a<i.length?"...":"")}else i=i.substring(0,100)+"..."}i=i.replace(r,'<span class="search-highlight">$1</span>'),t.innerHTML=`
<div class="search-result-title">${l}</div>
<div class="search-result-category">${e.category} in ${e.section}</div>
<div class="search-result-snippet">${i}</div>
`,t.addEventListener("click",function(){Y.classList.remove("active");let t=e.element;t&&setTimeout(()=>{let e=k.offsetHeight,s=t.getBoundingClientRect().top+window.pageYOffset-e-20;window.scrollTo({top:s,behavior:"smooth"});let l=t.closest(".cube-face");if(l){let r=["front","back","right","left","top","bottom"];for(let i of r)if(l.classList.contains(`cube-face-${i}`)){let o=document.querySelector(`.cube-nav-btn[data-face="${i}"]`);if(o){o.click();break}}}t.style.transition="background-color 0.5s ease";let n=window.getComputedStyle(t).backgroundColor;t.style.backgroundColor="rgba(108, 92, 231, 0.2)",setTimeout(()=>{t.style.backgroundColor=n,setTimeout(()=>{t.style.transition=""},500)},1500)},300)}),B.appendChild(t)})}}(s,e)}I.addEventListener("submit",function(e){e.preventDefault(),O()}),R.addEventListener("input",(X=function(){O()},function(...e){clearTimeout(j),j=setTimeout(()=>X.apply(this,e),300)})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href");if("#"===t)return;let s=document.querySelector(t);if(s){let l=k.offsetHeight,r=s.getBoundingClientRect().top+window.pageYOffset-l;window.scrollTo({top:r,behavior:"smooth"})}})});let W=document.getElementById("theme-toggle"),z=localStorage.getItem("theme");if(z)document.documentElement.setAttribute("data-theme",z);else{let T=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",T?"dark":"light")}if(W.addEventListener("click",function(){let e=document.documentElement.getAttribute("data-theme"),t="light"===e?"dark":"light";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)}),"IntersectionObserver"in window){let D=document.querySelector(".timeline-container"),M=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),M.unobserve(e.target),setTimeout(()=>{let t=e.target.querySelectorAll(".timeline-item");t.forEach((e,t)=>{setTimeout(()=>{e.classList.add("visible")},200*t)})},300))})},{threshold:.05,rootMargin:"0px 0px -10% 0px"});D&&M.observe(D);let N=document.querySelectorAll(".fade-in"),P=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){e.target.style.transitionDelay=`${.5*Math.random()}s`,e.target.classList.add("visible");let t=e.target.getBoundingClientRect();t.left<window.innerWidth/2?e.target.classList.add("slide-right"):e.target.classList.add("slide-left"),P.unobserve(e.target)}})},{threshold:.1});N.forEach(e=>{P.observe(e)})}else document.querySelectorAll(".fade-in, .timeline-container, .timeline-item").forEach(e=>{e.classList.add("visible")});let F=document.querySelectorAll(".filter-btn"),G=document.querySelectorAll(".project-card");F.forEach(e=>{e.addEventListener("click",function(){F.forEach(e=>e.classList.remove("active")),this.classList.add("active");let e=this.getAttribute("data-filter");G.forEach(t=>{if("all"===e)t.style.display="block";else{let s=t.getAttribute("data-category");s.includes(e)?t.style.display="block":t.style.display="none"}})})});let U=document.getElementById("back-to-top");window.addEventListener("scroll",function(){window.scrollY>500?U.classList.add("visible"):U.classList.remove("visible")}),U.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});let J=document.querySelectorAll(".hero-shape");document.addEventListener("mousemove",e=>{let t=e.clientX/window.innerWidth,s=e.clientY/window.innerHeight;J.forEach((e,l)=>{let r=(l+1)*20;e.style.transform=`translate3d(${(t-.5)*r}px, ${(s-.5)*r}px, 0)`})}),window.addEventListener("scroll",()=>{let e=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;document.querySelector(".scroll-progress").style.width=e/t*100+"%"});let K=document.getElementById("cube"),Q=document.querySelectorAll(".cube-nav-btn"),V=!1,Z={x:0,y:0},ee={x:-15,y:15};Q.forEach(e=>{e.addEventListener("click",()=>{Q.forEach(e=>e.classList.remove("active")),e.classList.add("active");let t=e.getAttribute("data-face"),s=0,l=0;switch(t){case"front":s=-15,l=15;break;case"back":s=-15,l=195;break;case"right":s=-15,l=105;break;case"left":s=-15,l=-75;break;case"top":s=75,l=15;break;case"bottom":s=-105,l=15}ee.x=s,ee.y=l,K.style.transform=`rotateX(${s}deg) rotateY(${l}deg)`})});let et=document.querySelector(".scene");et.addEventListener("mousedown",e=>{V=!0,Z={x:e.clientX,y:e.clientY},et.style.cursor="grabbing"}),document.addEventListener("mousemove",e=>{var t,s;if(!V)return;let l=e.clientX-Z.x,r=e.clientY-Z.y;t=l,s=r,ee.y+=.5*t,ee.x-=.5*s,ee.x=Math.max(-180,Math.min(180,ee.x)),K.style.transform=`rotateX(${ee.x}deg) rotateY(${ee.y}deg)`,Z={x:e.clientX,y:e.clientY}}),document.addEventListener("mouseup",()=>{V=!1,et.style.cursor="grab"});let es=null,el=0,er=0;function ei(){ee.y+=.24*el,ee.x-=.24*er,K.style.transform=`rotateX(${ee.x}deg) rotateY(${ee.y}deg)`,K.style.willChange="transform"}et.addEventListener("touchstart",e=>{1===e.touches.length&&(V=!0,Z={x:e.touches[0].clientX,y:e.touches[0].clientY},e.preventDefault(),K.classList.add("dragging"))}),document.addEventListener("touchmove",e=>{V&&1===e.touches.length&&(el=e.touches[0].clientX-Z.x,er=e.touches[0].clientY-Z.y,Z={x:e.touches[0].clientX,y:e.touches[0].clientY},es&&cancelAnimationFrame(es),es=requestAnimationFrame(ei),e.preventDefault())}),document.addEventListener("touchend",()=>{V=!1,K.classList.remove("dragging"),en=.1*el,ea=.1*er,function e(){if(.1>Math.abs(en)&&.1>Math.abs(ea)){K.style.willChange="auto";return}ee.y+=en,ee.x-=ea,en*=.95,ea*=.95,K.style.transform=`rotateX(${ee.x}deg) rotateY(${ee.y}deg)`,eo=requestAnimationFrame(e)}()}),document.addEventListener("touchcancel",()=>{V=!1,K.classList.remove("dragging")});let eo=null,en=0,ea=0});